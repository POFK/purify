if(EIGEN3_INCLUDE_DIR)
  include_directories(SYSTEM ${EIGEN3_INCLUDE_DIR})
endif()
if(Boost_INCLUDE_DIR)
  include_directories(SYSTEM ${Boost_INCLUDE_DIR})
endif()
if(CFitsIO_INCLUDE_DIR)
  include_directories(SYSTEM ${CFitsIO_INCLUDE_DIR})
endif()
if(CCFits_INCLUDE_DIR)
  include_directories(SYSTEM ${CCFits_INCLUDE_DIR}/.. ${CCFits_INCLUDE_DIR})
endif()
include_directories(SYSTEM ${FFTW3_INCLUDE_DIR})

add_library(cppurify MeasurementOperator.cc FFTOperator.cc clean.cc utilities.cc pfitsio.cc kernels.cc RMOperator.cc)
target_link_libraries(cppurify ${FFTW3_DOUBLE_LIBRARY} ${CCFits_LIBRARY} ${CFitsIO_LIBRARY})
add_dependencies(cppurify lookup_dependencies)

file(MAKE_DIRECTORY "${CMAKE_CURRENT_BINARY_DIR}/include/purify/")
configure_file(tests/directories.in.h "${PROJECT_BINARY_DIR}/include/purify/directories.h")
include_directories("${PROJECT_BINARY_DIR}/include/purify/")

add_subdirectory(example)
add_subdirectory(regressions)
if(tests)
  add_subdirectory(tests)
endif()
